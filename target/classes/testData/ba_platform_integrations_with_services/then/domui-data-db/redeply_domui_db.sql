/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 13-Mrz-2020 11:57:38 				*/
/*  DBMS       : PostgreSQL 						*/
/* ---------------------------------------------------- */
--select * from domui_data_service.SYS_PARAM
/* Drop Views */

DROP VIEW IF EXISTS domui_data_service.v_ntuple CASCADE
;

DROP VIEW IF EXISTS domui_data_service.v_ntuple_validity CASCADE
;

DROP VIEW IF EXISTS domui_data_service.v_resource CASCADE
;

DROP VIEW IF EXISTS domui_data_service.v_resource_ntuple CASCADE
;

DROP VIEW IF EXISTS domui_data_service.v_resource_ntuple_validity CASCADE
;

DROP VIEW IF EXISTS domui_data_service.v_domui_image_resource_ntuple CASCADE
;

DROP VIEW IF EXISTS domui_data_service.v_domui_text_resource_ntuple CASCADE
;

DROP VIEW IF EXISTS domui_data_service.v_domui_menu_item_resource_ntuple CASCADE
;

DROP VIEW IF EXISTS domui_data_service.v_domui_language_resource_ntuple CASCADE
;

DROP VIEW IF EXISTS domui_data_service.v_domui_warningmessage_resource_ntuple CASCADE
;

DROP VIEW IF EXISTS domui_data_service.v_domui_valuemapping_resource_ntuple CASCADE
;

/* Drop Tables */

DROP TABLE IF EXISTS domui_data_service.Validity_Type CASCADE
;

DROP TABLE IF EXISTS domui_data_service.Validity CASCADE
;

DROP TABLE IF EXISTS domui_data_service.n_Tuple CASCADE
;

DROP TABLE IF EXISTS domui_data_service.Validity_n_Tuple CASCADE
;

DROP TABLE IF EXISTS domui_data_service.Resource_Type CASCADE
;

DROP TABLE IF EXISTS domui_data_service.Resource CASCADE
;

DROP TABLE IF EXISTS domui_data_service.DOMUI_Image_Key CASCADE
;

DROP TABLE IF EXISTS domui_data_service.DOMUI_Image CASCADE
;

DROP TABLE IF EXISTS domui_data_service.Resource_DOMUI_Image CASCADE
;

DROP TABLE IF EXISTS domui_data_service.DOMUI_Text_Type CASCADE
;

DROP TABLE IF EXISTS domui_data_service.DOMUI_Text_Key CASCADE
;

DROP TABLE IF EXISTS domui_data_service.DOMUI_Text CASCADE
;

DROP TABLE IF EXISTS domui_data_service.Resource_DOMUI_Text CASCADE
;

DROP TABLE IF EXISTS domui_data_service.DOMUI_Menu_Item CASCADE
;

DROP TABLE IF EXISTS domui_data_service.Resource_DOMUI_Menu_Item CASCADE
;

DROP TABLE IF EXISTS domui_data_service.DOMUI_Language CASCADE
;

DROP TABLE IF EXISTS domui_data_service.Resource_DOMUI_Language CASCADE
;

DROP TABLE IF EXISTS domui_data_service.DOMUI_WarningMessage CASCADE
;

DROP TABLE IF EXISTS domui_data_service.Resource_DOMUI_WarningMessage CASCADE
;

DROP TABLE IF EXISTS domui_data_service.DOMUI_ValueMapping_Type CASCADE
;

DROP TABLE IF EXISTS domui_data_service.DOMUI_ValueMapping CASCADE
;

DROP TABLE IF EXISTS domui_data_service.Resource_DOMUI_ValueMapping CASCADE
;

DROP TABLE IF EXISTS domui_data_service.ba_sync CASCADE
;

DROP TABLE IF EXISTS domui_data_service.content_sync CASCADE
;

DROP TABLE IF EXISTS domui_data_service.content_sync_reference CASCADE
;

DROP TABLE IF EXISTS domui_data_service.request_log CASCADE
;

DROP TABLE IF EXISTS domui_data_service.sys_param CASCADE
;

/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 15-Sep-2020 14:08:19 				*/
/*  DBMS       : PostgreSQL 						*/
/* ---------------------------------------------------- */

/* Create Schemas for data domains */

CREATE SCHEMA IF NOT EXISTS domui_data_service;
SET search_path to 'domui_data_service';

/* Create Tables */

CREATE TABLE domui_data_service.Validity_Type
(
	Validity_Type_ID bigserial NOT NULL,    -- Internal ID of the table Validity_Type.  Used as PK.
	Validity_Type_Name text NOT NULL,    -- Unique identifier of the validity type.
	Description text NULL    -- (Optional) description field, which can be used to describe the meaning of the validity type.
)
;

CREATE TABLE domui_data_service.Validity
(
	Validity_ID bigserial NOT NULL,    -- Internal ID of the table Validity.  Used as PK.
	Validity_Type_ID bigint NOT NULL,    -- ID of the validity type. Reference to the associated row in the table Validity_Type.
	Validity_Code text NOT NULL    -- Text data of the validity.
)
;

CREATE TABLE domui_data_service.n_Tuple
(
	n_Tuple_ID bigserial NOT NULL,    -- Internal ID of the table n_Tuple.  Used as PK.
	n_Tuple_Name text NOT NULL    -- The unique name of the n_Tuple.  This column is just needed for query purposes, in order to have an identifier for the n-Tuple. A concatenation of the unique validities will be sufficient.  business-line | vehicle-line | vehicle-market | market |  device-name | device-model | device-model-variant | device-layout | device-market =>  P 213.0 ma-ece/row ece/row hu NTG7.0 Mid 720 hu-ece/row
)
;

CREATE TABLE domui_data_service.Validity_n_Tuple
(
	Validity_n_Tuple_ID bigserial NOT NULL,    -- Internal ID of the table Validity_n_Tuple.  Used as PK.
	n_Tuple_ID bigint NOT NULL,    -- ID of the n-Tuple. Reference to the associated row in the table n_Tuple.
	Validity_ID bigint NOT NULL    -- ID of the validity. Reference to the associated row in the table Validity.
)
;

CREATE TABLE domui_data_service.Resource_Type
(
	Resource_Type_ID bigserial NOT NULL,    -- Internal ID of the table Resource_Type.  Used as PK.
	Resource_Type_Name text NOT NULL,    -- Unique identifier of the resource type.
	Description text NULL    -- (Optional) description field, which can be used to describe the meaning of the resource type.
)
;

CREATE TABLE domui_data_service.Resource
(
	Resource_ID bigserial NOT NULL,    -- Internal ID of the table Resource.  Used as PK.
	Resource_Type_ID bigint NOT NULL,    -- ID of the resource type. Reference to the associated row in the table Resource_Type
	n_Tuple_ID bigint NOT NULL,    -- ID of the n-Tuple. Reference to the associated row in the table n_Tuple.
	ID_From_Source text NOT NULL,    -- Unique identifier from source.
	Version_From_Source integer NULL,    -- Version from source.
	Language text NOT NULL   DEFAULT '--',    -- Language of the resource using ISO 639-1. Default: --
	Locale text NOT NULL   DEFAULT '--',    -- Locale of the resource using ISO 3166. Default: --
	Revision integer NOT NULL,    -- Internal version of the resource.  If a new resource is created for the unique combination of      (id_from_source, resource_type_id, n_tuple_id, language and locale)  the revision will be incremented by 1.
	Creation_Timestamp timestamp(6) with time zone NOT NULL,    -- Point in time, at which this resource was created.
	content_sync_id bigint NULL,    -- ID of the content sync resource. Reference to the associated row in the table content_sync  If the resource is created during a content synchronisation process with OA content service, the content_sync_id can be stored in this column to indicate the origin of the resource.
	ba_sync_id bigint NULL    -- ID of the BA sync resource. Reference to the associated row in the table ba_sync  If the resource is created during a content synchronisation process with BA platform, the ba_sync_id can be stored in this column to indicate the origin of the resource.
)
;

CREATE TABLE domui_data_service.DOMUI_Image_Key
(
	DOMUI_Image_Key_ID bigserial NOT NULL,    -- Internal ID of the table DOMUI_Image_Key. Used as PK.
	Image_Key_Value text NOT NULL    -- Identifier of the image.
)
;

CREATE TABLE domui_data_service.DOMUI_Image
(
	DOMUI_Image_ID bigserial NOT NULL,    -- Internal ID of the table DOMUI_Image. Used as PK.
	Image_Key bigint NOT NULL,    -- Identifier of the image. Reference to the associated row in the table 'DOMUI_Image_Key'.
	Image_Name text NOT NULL,    -- Filename of the image.
	Language text NOT NULL,    -- Language of the image using ISO 639-1.
	Locale text NOT NULL    -- Locale of the image using ISO 3166.
)
;

CREATE TABLE domui_data_service.Resource_DOMUI_Image
(
	Resource_DOMUI_Image_ID bigserial NOT NULL,    -- Internal ID of the table Resource_DOMUI_Image Used as PK.
	Resource_ID bigint NOT NULL,    -- ID of the resource. Reference to the associated row in the table Resource.
	DOMUI_Image_ID bigint NOT NULL    -- ID of the DOM-UI image. Reference to the associated row in the table DOMUI_Image.
)
;

CREATE TABLE domui_data_service.DOMUI_Text_Type
(
	DOMUI_Text_Type_ID bigserial NOT NULL,    -- Internal ID of the table DOMUI_Text_Type.  Used as PK.
	DOMUI_Text_Type smallint NOT NULL,    -- Unique identifier of the Text type. (integer)
	DOMUI_Text_Type_Name text NOT NULL,    -- Unique identifier of the Text type. (text)
	Description text NULL    -- (Optional) description of the Text type.
)
;

CREATE TABLE domui_data_service.DOMUI_Text_Key
(
	DOMUI_Text_Key_ID bigserial NOT NULL,    -- Internal ID of the table DOMUI_Text_Key.  Used as PK.
	Text_Key_Value text NOT NULL    -- Identifier of the DOM-UI text.
)
;

CREATE TABLE domui_data_service.DOMUI_Text
(
	DOMUI_Text_ID bigserial NOT NULL,    -- Internal ID of the table DOMUI_Text.  Used as PK.
	DOMUI_Text_Type_ID bigint NOT NULL,    -- ID of the Text type. Reference to the associated row in the table 'DOMUI_Text_Type'.
	Text_Key bigint NOT NULL,    -- Identifier of the DOM-UI text. Reference to the associated row in the table 'DOMUI_Text_Key'.
	Text_Value text NOT NULL,    -- DOM-UI text in a specific language.
	Language text NOT NULL,    -- Language of the text using ISO 639-1.
	Locale text NOT NULL    -- Locale of the text using ISO 3166.
)
;

CREATE TABLE domui_data_service.Resource_DOMUI_Text
(
	Resource_DOMUI_Text_ID bigserial NOT NULL,    -- Internal ID of the table Resource_DOMUI_Text Used as PK.
	Resource_ID bigint NOT NULL,    -- ID of the resource. Reference to the associated row in the table Resource.
	DOMUI_Text_ID bigint NOT NULL    -- ID of the DOM-UI Text. Reference to the associated row in the table DOMUI_TEXT.
)
;

CREATE TABLE domui_data_service.DOMUI_Menu_Item
(
	DOMUI_Menu_Item_ID bigserial NOT NULL,    -- Internal ID of the table DOMUI_Menu_Item.  Used as PK.
	Parent_Item_ID bigint NULL,    -- The internal ID of a possible parent menu item.
	Title_Key bigint NOT NULL,    -- The title of the menu item in form of a language unspecific key, which points to corresponding entries in the table DOMUI_Text_Key.
	Text_Key bigint NULL,    -- A descriptive text of the menu item in form of a language unspecific key, which points to corresponding entries in the table DOMUI_Text_Key.
	Add_Text_Key bigint NULL,    -- An additional descriptive text of the menu item in form of a language unspecific key, which points to corresponding entries in the table DOMUI_Text_Key.
	Icon text NULL,    -- A constant which defines an assigned icon.
	Image_Key bigint NULL,    -- A language unspecific key for an assigned image, pointing to corresponding entries in the table DOMUI_Image_Key.
	Sort_Order integer NOT NULL,    -- A freely definable, numeric value to handle the order of menu items on the same level.
	Action text NULL,    -- A possible action assigned to a menu item.
	Object_ID_From_Source text NOT NULL    -- A reference ID to a specific DOM content, assigned to the menu item. The reference has to be language unspecific.
)
;

CREATE TABLE domui_data_service.Resource_DOMUI_Menu_Item
(
	Resource_DOMUI_Menu_Item_ID bigserial NOT NULL,    -- Internal ID of the table Resource_DOMUI_Menu_Item Used as PK.
	Resource_ID bigint NOT NULL,    -- ID of the resource. Reference to the associated row in the table Resource.
	DOMUI_Menu_Item_ID bigint NOT NULL    -- ID of the DOM-UI menu item. Reference to the associated row in the table DOMUI_Menu_Item.
)
;

CREATE TABLE domui_data_service.DOMUI_Language
(
	DOMUI_Language_ID bigserial NOT NULL,    -- Internal ID of the table DOMUI_Language. Used as PK.
	Language text NOT NULL,    -- Language code corresponding to ISO639-1  Examples: 'de' 'en'
	Language3 text NOT NULL,    -- Language code corresponding to ISO639-3  Examples: 'deu' 'eng'
	Locale text NOT NULL,    -- Locale code corresponding to ISO-3166  Examples: 'DE' 'GB'
	Locale_HU text NULL,    -- Locale code for the HU mapping, corresponding to ISO-3166  Examples: 'DE' 'GB'
	Reading_Direction integer NULL,    -- Reading direction of the language.  Possible values: 1 - LTR - Left-to-right 2 - RTL - Right-to-left
	Sort_Order integer NOT NULL    -- Order number of the language entry.  Remark: This column was renamed from "order" to "sort_order".
)
;

CREATE TABLE domui_data_service.Resource_DOMUI_Language
(
	Resource_DOMUI_Language_ID bigserial NOT NULL,    -- Internal ID of the table Resource_DOMUI_Language Used as PK.
	Resource_ID bigint NOT NULL,    -- ID of the resource. Reference to the associated row in the table Resource.
	DOMUI_Language_ID bigint NOT NULL    -- ID of the DOM-UI language. Reference to the associated row in the table DOMUI_Language.
)
;

CREATE TABLE domui_data_service.DOMUI_WarningMessage
(
	DOMUI_WarningMessage_ID bigserial NOT NULL,    -- Internal ID of the table DOMUI_WarningMessage. Used as PK.
	Message_Text_Key bigint NOT NULL,    -- The text key of the warning message, which points to corresponding entries in the table DOMUI_Text_Key.
	Short_Description_ID text NULL,    -- ID of the topic referencing to the short description of the warning message.
	Long_Description_ID text NOT NULL,    -- ID of the topic referencing to the long description of the warning message.
	Message_ID text NOT NULL    -- The message ID for this warning message.
)
;

CREATE TABLE domui_data_service.Resource_DOMUI_WarningMessage
(
	Resource_DOMUI_WarningMessage_ID bigserial NOT NULL,    -- Internal ID of the table Resource_DOMUI_WarningMessage Used as PK.
	Resource_ID bigint NOT NULL,    -- ID of the resource. Reference to the associated row in the table Resource.
	DOMUI_WarningMessage_ID bigint NOT NULL    -- ID of the DOM-UI WarningMessage. Reference to the associated row in the table DOMUI_WarningMessage.
)
;

CREATE TABLE domui_data_service.DOMUI_ValueMapping_Type
(
	DOMUI_ValueMapping_Type_ID bigserial NOT NULL,    -- Internal ID of the table DOMUI_ValueMapping_Type.  Used as PK.
	DOMUI_ValueMapping_Type smallint NOT NULL,    -- Unique identifier of the ValueMapping type. (integer)
	DOMUI_ValueMapping_Type_Name text NOT NULL,    -- Unique identifier of the ValueMapping type. (text)
	Description text NULL    -- (Optional) description of the ValueMapping type.
)
;

CREATE TABLE domui_data_service.DOMUI_ValueMapping
(
	DOMUI_ValueMapping_ID bigserial NOT NULL,    -- Internal ID of the table DOMUI_ValueMapping. Used as PK.
	DOMUI_ValueMapping_Type_ID bigint NOT NULL,    -- ID of the ValueMapping type. Reference to the associated row in the table 'DOMUI_ValueMapping_Type'.
	ValueMapping_Name text NOT NULL,    -- The name of the ValueMapping.
	ValueMapping_Value text NOT NULL    -- The text value of the ValueMapping.
)
;

CREATE TABLE domui_data_service.Resource_DOMUI_ValueMapping
(
	Resource_DOMUI_ValueMapping_ID bigserial NOT NULL,    -- Internal ID of the table Resource_DOMUI_ValueMapping Used as PK.
	Resource_ID bigint NOT NULL,    -- ID of the resource. Reference to the associated row in the table Resource.
	DOMUI_ValueMapping_ID bigint NOT NULL    -- ID of the DOM-UI ValueMapping. Reference to the associated row in the table DOMUI_ValueMapping.
)
;

CREATE TABLE domui_data_service.ba_sync
(
	ba_sync_id bigserial NOT NULL,    -- Internal ID of the table ba_sync Used as PK.
	sync_resource_type text NOT NULL,    -- URN to identify the resource type.  Example: urn:com:mercedes-benz:oa:dom-ui-data-service:basync
	sync_resource_location text NOT NULL,    -- Location of the resource (complete path).  Example: http://dom-ui-data-service:8080/dom-ui-data-service/v1/basync/20
	sync_resource_status integer NOT NULL,    -- Status code indicating the type of change of the resource.   Possible values:  -1: Error 0: Resource not changed 1: Resource created 2: Resource updated 3: Resource deleted
	creation_timestamp timestamp(6) with time zone NOT NULL,    -- The timestamp of the message, which initiated the sync run. Populated with now() when starting a sync run.
	log_file_url text NULL    -- A reference to a log file where new log entries get appended.
)
;

CREATE TABLE domui_data_service.content_sync
(
	content_sync_id bigserial NOT NULL,    -- Internal ID of the table content_sync Used as PK.
	sync_resource_type text NOT NULL,    -- URN to identify the resource type.  Example: urn:com:mercedes-benz:oa:dom-ui-data-service:contentsync
	sync_resource_location text NOT NULL,    -- Location of the resource (complete path).  Example: http://dom-ui-data-service:8080/dom-ui-data-service/v1/contentsync/20
	sync_resource_status integer NOT NULL,    -- Status code indicating the type of change of the resource.   Possible values:  -1: Error 0: Resource not changed 1: Resource created 2: Resource updated 3: Resource deleted
	creation_timestamp timestamp(6) with time zone NOT NULL,    -- The timestamp of the message, which initiated the sync run. Populated with now() when starting a sync run.
	log_file_url text NULL    -- A reference to a log file where new log entries get appended.
)
;

CREATE TABLE domui_data_service.content_sync_reference
(
	content_sync_reference_id bigserial NOT NULL,    -- Internal ID of the table content_sync_reference Used as PK.
	content_sync_id bigint NOT NULL,    -- ID of the content_sync. Reference to the associated row in the table content_sync.
	ref_resource_type text NOT NULL,    -- URN to identify the resource type.  Example: urn:com:mercedes-benz:oa:query
	ref_resource_location text NOT NULL,    -- Location of the referenced resource (complete path).  Example: http://oa-content-service:8080/oa-content-service/v1/queries/63
	ref_resource_id bigint NOT NULL,    -- The ID of the referenced resource.
	creation_timestamp timestamp(6) with time zone NOT NULL    -- The timestamp for the creation of this entry.
)
;

CREATE TABLE domui_data_service.request_log
(
	request_log_id bigserial NOT NULL,    -- Internal ID of the table request_log Used as PK.
	message_content text NULL,    -- The content of the received message.
	message_timestamp timestamp(6) with time zone NULL,    -- The timestamp when the message was received.
	message_exchange text NULL,    -- The exchange name from where the message was received.  Examples: 	- oa-content-bulk_exchange 	- oa-content-query_exchange 	- ...
	request_content text NOT NULL,    -- The content of the request.
	request_timestamp timestamp(6) with time zone NOT NULL,    -- The timestamp when the request was sent.
	request_type text NOT NULL,    -- The type of the request.  Examples: 	- POST /queries 	- GET /queries/{id} 	- ...
	response_content text NULL,    -- The content of the response. (The column is set to NULL first and populated as soon as it is available.)
	response_timestamp timestamp(6) with time zone NULL,    -- The timestamp of the response. (The column is set to NULL first and populated as soon as it is available.)
	user_id text NULL,    -- (Optional) User, who initiated the request.
	status smallint NOT NULL   DEFAULT 0    -- Status of the request.   Possible values: 0 = NEW: initial default value 1 = IN_PROGRESS: request is in progress (REQUEST has been inserted into the table, RESPONSE is added when available.) 2 = COMPLETED: processing of the request was successful 3 = FAILED:  processing of the request has failed
)
;

CREATE TABLE domui_data_service.sys_param
(
	sys_param_id bigserial NOT NULL,    -- Internal ID of the table sys_param.  Used as PK.
	par_name text NOT NULL,    -- Name of the parameter.  The value has to be unique for all rows in the table.
	par_value text NOT NULL,    -- Value of the parameter.
	par_description text NULL    -- (Optional) Description of the parameter.  It should describe the meaning of the specific parameter or for what purpose the parameter is needed.
)
;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE domui_data_service.Validity_Type ADD CONSTRAINT PK_Validity_Type
	PRIMARY KEY (Validity_Type_ID)
;

ALTER TABLE domui_data_service.Validity_Type
  ADD CONSTRAINT UC_Validity_Type_Name UNIQUE (Validity_Type_Name)
;

CREATE INDEX IX_Validity_Type ON domui_data_service.Validity_Type (Validity_Type_Name ASC)
;

ALTER TABLE domui_data_service.Validity ADD CONSTRAINT PK_Validity
	PRIMARY KEY (Validity_ID)
;

ALTER TABLE domui_data_service.Validity
  ADD CONSTRAINT UC_Validity_Code UNIQUE (Validity_Type_ID,Validity_Code)
;

CREATE INDEX IX_Validity_Code ON domui_data_service.Validity (Validity_Code ASC)
;

CREATE INDEX IXFK_Validity_Validity_Type ON domui_data_service.Validity (Validity_Type_ID ASC)
;

ALTER TABLE domui_data_service.n_Tuple ADD CONSTRAINT PK_n_Tuple
	PRIMARY KEY (n_Tuple_ID)
;

ALTER TABLE domui_data_service.n_Tuple
  ADD CONSTRAINT UC_n_Tuple UNIQUE (n_Tuple_Name)
;

ALTER TABLE domui_data_service.Validity_n_Tuple ADD CONSTRAINT PK_Validity_n_Tuple
	PRIMARY KEY (Validity_n_Tuple_ID)
;

ALTER TABLE domui_data_service.Validity_n_Tuple
  ADD CONSTRAINT UC_Validity_n_Tuple UNIQUE (n_Tuple_ID,Validity_ID)
;

CREATE INDEX IXFK_Validity_n_Tuple_n_Tuple ON domui_data_service.Validity_n_Tuple (n_Tuple_ID ASC)
;

CREATE INDEX IXFK_Validity_n_Tuple_Validity ON domui_data_service.Validity_n_Tuple (Validity_ID ASC)
;

ALTER TABLE domui_data_service.Resource_Type ADD CONSTRAINT PK_Resource_Type
	PRIMARY KEY (Resource_Type_ID)
;

ALTER TABLE domui_data_service.Resource_Type
  ADD CONSTRAINT UC_Resource_Type_Name UNIQUE (Resource_Type_Name)
;

CREATE INDEX IX_Resource_Type ON domui_data_service.Resource_Type (Resource_Type_Name ASC)
;

ALTER TABLE domui_data_service.Resource ADD CONSTRAINT PK_Resource
	PRIMARY KEY (Resource_ID)
;

ALTER TABLE domui_data_service.Resource
  ADD CONSTRAINT UC_Resource_Sec_Key UNIQUE (Resource_Type_ID,n_Tuple_ID,ID_From_Source,Language,Locale,Revision)
;

CREATE INDEX IXFK_Resource_ba_sync ON domui_data_service.Resource (ba_sync_id ASC)
;

CREATE INDEX IXFK_Resource_content_sync ON domui_data_service.Resource (content_sync_id ASC)
;

CREATE INDEX IXFK_Resource_n_Tuple ON domui_data_service.Resource (n_Tuple_ID ASC)
;

CREATE INDEX IXFK_Resource_Resource_Type ON domui_data_service.Resource (Resource_Type_ID ASC)
;

ALTER TABLE domui_data_service.DOMUI_Image_Key ADD CONSTRAINT PK_DOMUI_Image_Key
	PRIMARY KEY (DOMUI_Image_Key_ID)
;

ALTER TABLE domui_data_service.DOMUI_Image_Key
  ADD CONSTRAINT UC_DOMUI_Image_Key UNIQUE (Image_Key_Value)
;

CREATE INDEX IX_DOMUI_Image_Key ON domui_data_service.DOMUI_Image_Key (Image_Key_Value ASC)
;

ALTER TABLE domui_data_service.DOMUI_Image ADD CONSTRAINT PK_DOMUI_Image
	PRIMARY KEY (DOMUI_Image_ID)
;

ALTER TABLE domui_data_service.DOMUI_Image
  ADD CONSTRAINT UC_DOMUI_Image UNIQUE (Image_Key,Language,Locale)
;

CREATE INDEX IXFK_DOMUI_Image_DOMUI_Image_Key ON domui_data_service.DOMUI_Image (Image_Key ASC)
;

ALTER TABLE domui_data_service.Resource_DOMUI_Image ADD CONSTRAINT PK_Resource_DOMUI_Image
	PRIMARY KEY (Resource_DOMUI_Image_ID)
;

ALTER TABLE domui_data_service.Resource_DOMUI_Image
  ADD CONSTRAINT UC_Resource_DOMUI_Image UNIQUE (Resource_ID,DOMUI_Image_ID)
;

CREATE INDEX IXFK_Resource_DOMUI_Image_DOMUI_Image ON domui_data_service.Resource_DOMUI_Image (DOMUI_Image_ID ASC)
;

CREATE INDEX IXFK_Resource_DOMUI_Image_Resource ON domui_data_service.Resource_DOMUI_Image (Resource_ID ASC)
;

ALTER TABLE domui_data_service.DOMUI_Text_Type ADD CONSTRAINT PK_DOMUI_Text_Type
	PRIMARY KEY (DOMUI_Text_Type_ID)
;

ALTER TABLE domui_data_service.DOMUI_Text_Type
  ADD CONSTRAINT UC_DOMUI_Text_Type_Numeric UNIQUE (DOMUI_Text_Type)
;

ALTER TABLE domui_data_service.DOMUI_Text_Type
  ADD CONSTRAINT UC_DOMUI_Text_Type_Name UNIQUE (DOMUI_Text_Type_Name)
;

CREATE INDEX IX_DOMUI_Text_Type ON domui_data_service.DOMUI_Text_Type (DOMUI_Text_Type_Name ASC)
;

ALTER TABLE domui_data_service.DOMUI_Text_Key ADD CONSTRAINT PK_DOMUI_Text_Key
	PRIMARY KEY (DOMUI_Text_Key_ID)
;

ALTER TABLE domui_data_service.DOMUI_Text_Key
  ADD CONSTRAINT UC_DOMUI_Text_Key UNIQUE (Text_Key_Value)
;

CREATE INDEX IX_DOMUI_Text_Key ON domui_data_service.DOMUI_Text_Key (Text_Key_Value ASC)
;

ALTER TABLE domui_data_service.DOMUI_Text ADD CONSTRAINT PK_DOMUI_Text
	PRIMARY KEY (DOMUI_Text_ID)
;

ALTER TABLE domui_data_service.DOMUI_Text
  ADD CONSTRAINT UC_DOMUI_Text UNIQUE (DOMUI_Text_Type_ID,Text_Key,Text_Value,Language,Locale)
;

CREATE INDEX IXFK_DOMUI_Text_DOMUI_Text_Key ON domui_data_service.DOMUI_Text (Text_Key ASC)
;

CREATE INDEX IXFK_DOMUI_Text_DOMUI_Text_Type ON domui_data_service.DOMUI_Text (DOMUI_Text_Type_ID ASC)
;

ALTER TABLE domui_data_service.Resource_DOMUI_Text ADD CONSTRAINT PK_Resource_DOMUI_Text
	PRIMARY KEY (Resource_DOMUI_Text_ID)
;

ALTER TABLE domui_data_service.Resource_DOMUI_Text
  ADD CONSTRAINT UC_Resource_DOMUI_Text UNIQUE (Resource_ID,DOMUI_Text_ID)
;

CREATE INDEX IXFK_Resource_DOMUI_Text_DOMUI_Text ON domui_data_service.Resource_DOMUI_Text (DOMUI_Text_ID ASC)
;

CREATE INDEX IXFK_Resource_DOMUI_Text_Resource ON domui_data_service.Resource_DOMUI_Text (Resource_ID ASC)
;

ALTER TABLE domui_data_service.DOMUI_Menu_Item ADD CONSTRAINT PK_DOMUI_Menu_Item
	PRIMARY KEY (DOMUI_Menu_Item_ID)
;

ALTER TABLE domui_data_service.DOMUI_Menu_Item
  ADD CONSTRAINT UC_DOMUI_Menu_Item UNIQUE (Title_Key,Object_ID_From_Source,Sort_Order)
;

CREATE INDEX IXFK_DOMUI_Menu_Item_DOMUI_Image_Key ON domui_data_service.DOMUI_Menu_Item (Image_Key ASC)
;

CREATE INDEX IXFK_DOMUI_Menu_Item_DOMUI_Text_Key_Add_Text ON domui_data_service.DOMUI_Menu_Item (Add_Text_Key ASC)
;

CREATE INDEX IXFK_DOMUI_Menu_Item_DOMUI_Text_Key_Text ON domui_data_service.DOMUI_Menu_Item (Text_Key ASC)
;

CREATE INDEX IXFK_DOMUI_Menu_Item_DOMUI_Text_Key_Title ON domui_data_service.DOMUI_Menu_Item (Title_Key ASC)
;

CREATE INDEX IXFK_DOMUI_Menu_Item_Parent_DOMUI_Menu_Item ON domui_data_service.DOMUI_Menu_Item (Parent_Item_ID ASC)
;

ALTER TABLE domui_data_service.Resource_DOMUI_Menu_Item ADD CONSTRAINT PK_Resource_DOMUI_Menu_Item
	PRIMARY KEY (Resource_DOMUI_Menu_Item_ID)
;

ALTER TABLE domui_data_service.Resource_DOMUI_Menu_Item
  ADD CONSTRAINT UC_Resource_DOMUI_Menu_Item UNIQUE (Resource_ID,DOMUI_Menu_Item_ID)
;

CREATE INDEX IXFK_Resource_DOMUI_Menu_Item_DOMUI_Menu_Item ON domui_data_service.Resource_DOMUI_Menu_Item (DOMUI_Menu_Item_ID ASC)
;

CREATE INDEX IXFK_Resource_DOMUI_Menu_Item_Resource ON domui_data_service.Resource_DOMUI_Menu_Item (Resource_ID ASC)
;

ALTER TABLE domui_data_service.DOMUI_Language ADD CONSTRAINT PK_DOMUI_Language
	PRIMARY KEY (DOMUI_Language_ID)
;

ALTER TABLE domui_data_service.DOMUI_Language
  ADD CONSTRAINT UC_DOMUI_Language UNIQUE (Language,Language3,Locale,Locale_HU,Sort_Order)
;

CREATE INDEX IX_DOMUI_Language_1 ON domui_data_service.DOMUI_Language (Language ASC)
;

CREATE INDEX IX_DOMUI_Language_Locale ON domui_data_service.DOMUI_Language (Locale ASC)
;

CREATE INDEX IX_DOMUI_Language_3 ON domui_data_service.DOMUI_Language (Language3 ASC)
;

ALTER TABLE domui_data_service.Resource_DOMUI_Language ADD CONSTRAINT PK_Resource_DOMUI_Language
	PRIMARY KEY (Resource_DOMUI_Language_ID)
;

ALTER TABLE domui_data_service.Resource_DOMUI_Language
  ADD CONSTRAINT UC_Resource_DOMUI_Language UNIQUE (Resource_ID,DOMUI_Language_ID)
;

CREATE INDEX IXFK_Resource_DOMUI_Language_DOMUI_Language ON domui_data_service.Resource_DOMUI_Language (DOMUI_Language_ID ASC)
;

CREATE INDEX IXFK_Resource_DOMUI_Language_Resource ON domui_data_service.Resource_DOMUI_Language (Resource_ID ASC)
;

ALTER TABLE domui_data_service.DOMUI_WarningMessage ADD CONSTRAINT PK_DOMUI_WarningMessage
	PRIMARY KEY (DOMUI_WarningMessage_ID)
;

ALTER TABLE domui_data_service.DOMUI_WarningMessage
  ADD CONSTRAINT UC_DOMUI_WarningMessage UNIQUE (Message_Text_Key,Long_Description_ID)
;

CREATE INDEX IXFK_DOMUI_WarningMessage_DOMUI_Text_Key_Message ON domui_data_service.DOMUI_WarningMessage (Message_Text_Key ASC)
;

CREATE INDEX IX_DOMUI_WarningMessage_Short_Desc_ID ON domui_data_service.DOMUI_WarningMessage (Short_Description_ID ASC)
;

ALTER TABLE domui_data_service.Resource_DOMUI_WarningMessage ADD CONSTRAINT PK_Resource_DOMUI_WarningMessage
	PRIMARY KEY (Resource_DOMUI_WarningMessage_ID)
;

ALTER TABLE domui_data_service.Resource_DOMUI_WarningMessage
  ADD CONSTRAINT UC_Resource_DOMUI_WarningMessage UNIQUE (Resource_ID,DOMUI_WarningMessage_ID)
;

CREATE INDEX IXFK_Resource_DOMUI_WarningMessage_DOMUI_WarningMessage ON domui_data_service.Resource_DOMUI_WarningMessage (DOMUI_WarningMessage_ID ASC)
;

CREATE INDEX IXFK_Resource_DOMUI_WarningMessage_Resource ON domui_data_service.Resource_DOMUI_WarningMessage (Resource_ID ASC)
;

ALTER TABLE domui_data_service.DOMUI_ValueMapping_Type ADD CONSTRAINT PK_DOMUI_ValueMapping_Type
	PRIMARY KEY (DOMUI_ValueMapping_Type_ID)
;

ALTER TABLE domui_data_service.DOMUI_ValueMapping_Type
  ADD CONSTRAINT UC_DOMUI_ValueMapping_Type_Name UNIQUE (DOMUI_ValueMapping_Type_Name)
;

ALTER TABLE domui_data_service.DOMUI_ValueMapping_Type
  ADD CONSTRAINT UC_DOMUI_ValueMapping_Type_Numeric UNIQUE (DOMUI_ValueMapping_Type)
;

CREATE INDEX IX_DOMUI_ValueMapping_Type ON domui_data_service.DOMUI_ValueMapping_Type (DOMUI_ValueMapping_Type_Name ASC)
;

ALTER TABLE domui_data_service.DOMUI_ValueMapping ADD CONSTRAINT PK_DOMUI_ValueMapping
	PRIMARY KEY (DOMUI_ValueMapping_ID)
;

ALTER TABLE domui_data_service.DOMUI_ValueMapping
  ADD CONSTRAINT UC_DOMUI_ValueMapping UNIQUE (DOMUI_ValueMapping_Type_ID,ValueMapping_Name,ValueMapping_Value)
;

CREATE INDEX IXFK_DOMUI_ValueMapping_DOMUI_ValueMapping_Type ON domui_data_service.DOMUI_ValueMapping (DOMUI_ValueMapping_Type_ID ASC)
;

CREATE INDEX IX_DOMUI_ValueMapping_Key ON domui_data_service.DOMUI_ValueMapping (ValueMapping_Name ASC)
;

ALTER TABLE domui_data_service.Resource_DOMUI_ValueMapping ADD CONSTRAINT PK_Resource_DOMUI_ValueMapping
	PRIMARY KEY (Resource_DOMUI_ValueMapping_ID)
;

ALTER TABLE domui_data_service.Resource_DOMUI_ValueMapping
  ADD CONSTRAINT UC_Resource_DOMUI_ValueMapping UNIQUE (Resource_ID,DOMUI_ValueMapping_ID)
;

CREATE INDEX IXFK_Resource_DOMUI_ValueMapping_DOMUI_ValueMapping ON domui_data_service.Resource_DOMUI_ValueMapping (DOMUI_ValueMapping_ID ASC)
;

CREATE INDEX IXFK_Resource_DOMUI_ValueMapping_Resource ON domui_data_service.Resource_DOMUI_ValueMapping (Resource_ID ASC)
;

ALTER TABLE domui_data_service.ba_sync ADD CONSTRAINT PK_BA_Sync
	PRIMARY KEY (ba_sync_id)
;

ALTER TABLE domui_data_service.content_sync ADD CONSTRAINT PK_Content_Sync
	PRIMARY KEY (content_sync_id)
;

ALTER TABLE domui_data_service.content_sync_reference ADD CONSTRAINT PK_Content_Sync_Reference
	PRIMARY KEY (content_sync_reference_id)
;

CREATE INDEX IXFK_Content_Sync_Reference_Content_Sync ON domui_data_service.content_sync_reference (content_sync_id ASC)
;

ALTER TABLE domui_data_service.request_log ADD CONSTRAINT PK_Request_Log
	PRIMARY KEY (request_log_id)
;

CREATE INDEX IX_Request_Log_Response_Timestamp ON domui_data_service.request_log (response_timestamp ASC,request_type ASC)
;

CREATE INDEX IX_Request_Log_Request_Timestamp ON domui_data_service.request_log (request_timestamp ASC,request_type ASC)
;

CREATE INDEX IX_Request_Log_Message_Timestamp ON domui_data_service.request_log (message_timestamp ASC,message_exchange ASC)
;

CREATE INDEX IX_Request_Log_Status ON domui_data_service.request_log (status ASC)
;

ALTER TABLE domui_data_service.sys_param ADD CONSTRAINT PK_System_Parameter
	PRIMARY KEY (sys_param_id)
;

ALTER TABLE domui_data_service.sys_param
  ADD CONSTRAINT UC_System_Parameter_Name UNIQUE (par_name)
;

/* Create Foreign Key Constraints */

ALTER TABLE domui_data_service.Validity ADD CONSTRAINT FK_Validity_Validity_Type
	FOREIGN KEY (Validity_Type_ID) REFERENCES domui_data_service.Validity_Type (Validity_Type_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Validity_n_Tuple ADD CONSTRAINT FK_Validity_n_Tuple_n_Tuple
	FOREIGN KEY (n_Tuple_ID) REFERENCES domui_data_service.n_Tuple (n_Tuple_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Validity_n_Tuple ADD CONSTRAINT FK_Validity_n_Tuple_Validity
	FOREIGN KEY (Validity_ID) REFERENCES domui_data_service.Validity (Validity_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource ADD CONSTRAINT FK_Resource_ba_sync
	FOREIGN KEY (ba_sync_id) REFERENCES domui_data_service.ba_sync (ba_sync_id) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource ADD CONSTRAINT FK_Resource_content_sync
	FOREIGN KEY (content_sync_id) REFERENCES domui_data_service.content_sync (content_sync_id) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource ADD CONSTRAINT FK_Resource_n_Tuple
	FOREIGN KEY (n_Tuple_ID) REFERENCES domui_data_service.n_Tuple (n_Tuple_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource ADD CONSTRAINT FK_Resource_Resource_Type
	FOREIGN KEY (Resource_Type_ID) REFERENCES domui_data_service.Resource_Type (Resource_Type_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.DOMUI_Image ADD CONSTRAINT FK_DOMUI_Image_DOMUI_Image_Key
	FOREIGN KEY (Image_Key) REFERENCES domui_data_service.DOMUI_Image_Key (DOMUI_Image_Key_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_Image ADD CONSTRAINT FK_Resource_DOMUI_Image_DOMUI_Image
	FOREIGN KEY (DOMUI_Image_ID) REFERENCES domui_data_service.DOMUI_Image (DOMUI_Image_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_Image ADD CONSTRAINT FK_Resource_DOMUI_Image_Resource
	FOREIGN KEY (Resource_ID) REFERENCES domui_data_service.Resource (Resource_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.DOMUI_Text ADD CONSTRAINT FK_DOMUI_Text_DOMUI_Text_Key
	FOREIGN KEY (Text_Key) REFERENCES domui_data_service.DOMUI_Text_Key (DOMUI_Text_Key_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.DOMUI_Text ADD CONSTRAINT FK_DOMUI_Text_DOMUI_Text_Type
	FOREIGN KEY (DOMUI_Text_Type_ID) REFERENCES domui_data_service.DOMUI_Text_Type (DOMUI_Text_Type_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_Text ADD CONSTRAINT FK_Resource_DOMUI_Text_DOMUI_Text
	FOREIGN KEY (DOMUI_Text_ID) REFERENCES domui_data_service.DOMUI_Text (DOMUI_Text_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_Text ADD CONSTRAINT FK_Resource_DOMUI_Text_Resource
	FOREIGN KEY (Resource_ID) REFERENCES domui_data_service.Resource (Resource_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.DOMUI_Menu_Item ADD CONSTRAINT FK_DOMUI_Menu_Item_DOMUI_Image_Key
	FOREIGN KEY (Image_Key) REFERENCES domui_data_service.DOMUI_Image_Key (DOMUI_Image_Key_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.DOMUI_Menu_Item ADD CONSTRAINT FK_DOMUI_Menu_Item_DOMUI_Text_Key_Add_Text
	FOREIGN KEY (Add_Text_Key) REFERENCES domui_data_service.DOMUI_Text_Key (DOMUI_Text_Key_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.DOMUI_Menu_Item ADD CONSTRAINT FK_DOMUI_Menu_Item_DOMUI_Text_Key_Text
	FOREIGN KEY (Text_Key) REFERENCES domui_data_service.DOMUI_Text_Key (DOMUI_Text_Key_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.DOMUI_Menu_Item ADD CONSTRAINT FK_DOMUI_Menu_Item_DOMUI_Text_Key_Title
	FOREIGN KEY (Title_Key) REFERENCES domui_data_service.DOMUI_Text_Key (DOMUI_Text_Key_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.DOMUI_Menu_Item ADD CONSTRAINT FK_DOMUI_Menu_Item_Parent_DOMUI_Menu_Item
	FOREIGN KEY (Parent_Item_ID) REFERENCES domui_data_service.DOMUI_Menu_Item (DOMUI_Menu_Item_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_Menu_Item ADD CONSTRAINT FK_Resource_DOMUI_Menu_Item_DOMUI_Menu_Item
	FOREIGN KEY (DOMUI_Menu_Item_ID) REFERENCES domui_data_service.DOMUI_Menu_Item (DOMUI_Menu_Item_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_Menu_Item ADD CONSTRAINT FK_Resource_DOMUI_Menu_Item_Resource
	FOREIGN KEY (Resource_ID) REFERENCES domui_data_service.Resource (Resource_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_Language ADD CONSTRAINT FK_Resource_DOMUI_Language_DOMUI_Language
	FOREIGN KEY (DOMUI_Language_ID) REFERENCES domui_data_service.DOMUI_Language (DOMUI_Language_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_Language ADD CONSTRAINT FK_Resource_DOMUI_Language_Resource
	FOREIGN KEY (Resource_ID) REFERENCES domui_data_service.Resource (Resource_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.DOMUI_WarningMessage ADD CONSTRAINT FK_DOMUI_WarningMessage_DOMUI_Text_Key_Message
	FOREIGN KEY (Message_Text_Key) REFERENCES domui_data_service.DOMUI_Text_Key (DOMUI_Text_Key_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_WarningMessage ADD CONSTRAINT FK_Resource_DOMUI_WarningMessage_DOMUI_WarningMessage
	FOREIGN KEY (DOMUI_WarningMessage_ID) REFERENCES domui_data_service.DOMUI_WarningMessage (DOMUI_WarningMessage_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_WarningMessage ADD CONSTRAINT FK_Resource_DOMUI_WarningMessage_Resource
	FOREIGN KEY (Resource_ID) REFERENCES domui_data_service.Resource (Resource_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.DOMUI_ValueMapping ADD CONSTRAINT FK_DOMUI_ValueMapping_DOMUI_ValueMapping_Type
	FOREIGN KEY (DOMUI_ValueMapping_Type_ID) REFERENCES domui_data_service.DOMUI_ValueMapping_Type (DOMUI_ValueMapping_Type_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_ValueMapping ADD CONSTRAINT FK_Resource_DOMUI_ValueMapping_DOMUI_ValueMapping
	FOREIGN KEY (DOMUI_ValueMapping_ID) REFERENCES domui_data_service.DOMUI_ValueMapping (DOMUI_ValueMapping_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.Resource_DOMUI_ValueMapping ADD CONSTRAINT FK_Resource_DOMUI_ValueMapping_Resource
	FOREIGN KEY (Resource_ID) REFERENCES domui_data_service.Resource (Resource_ID) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE domui_data_service.content_sync_reference ADD CONSTRAINT FK_Content_Sync_Reference_Content_Sync
	FOREIGN KEY (content_sync_id) REFERENCES domui_data_service.content_sync (content_sync_id) ON DELETE No Action ON UPDATE No Action
;

/* Create Table Comments, Sequences for Autonumber Columns */

COMMENT ON TABLE domui_data_service.Validity_Type
	IS 'Reference table, which is used to define a type for the validity.  Possible validity types: 	- pa-id 	- business-line 	- vehicle-line 	- vehicle-market 	- state-of-construction 	- market 	- device-model 	- device-model-variant 	- device-market 	- device-layout 	- ...'
;

COMMENT ON COLUMN domui_data_service.Validity_Type.Validity_Type_ID
	IS 'Internal ID of the table Validity_Type.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Validity_Type.Validity_Type_Name
	IS 'Unique identifier of the validity type.'
;

COMMENT ON COLUMN domui_data_service.Validity_Type.Description
	IS '(Optional) description field, which can be used to describe the meaning of the validity type.'
;



COMMENT ON TABLE domui_data_service.Validity
	IS 'This table stores validities which are used to define an n-Tuple. '
;

COMMENT ON COLUMN domui_data_service.Validity.Validity_ID
	IS 'Internal ID of the table Validity.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Validity.Validity_Type_ID
	IS 'ID of the validity type. Reference to the associated row in the table Validity_Type.'
;

COMMENT ON COLUMN domui_data_service.Validity.Validity_Code
	IS 'Text data of the validity.'
;



COMMENT ON TABLE domui_data_service.n_Tuple
	IS 'This table defines an n-Tuple, which is a logical set of different validities.'
;

COMMENT ON COLUMN domui_data_service.n_Tuple.n_Tuple_ID
	IS 'Internal ID of the table n_Tuple.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.n_Tuple.n_Tuple_Name
	IS 'The unique name of the n_Tuple.  This column is just needed for query purposes, in order to have an identifier for the n-Tuple. A concatenation of the unique validities will be sufficient.  business-line | vehicle-line | vehicle-market | market |  device-name | device-model | device-model-variant | device-layout | device-market =>  P 213.0 ma-ece/row ece/row hu NTG7.0 Mid 720 hu-ece/row'
;



COMMENT ON TABLE domui_data_service.Validity_n_Tuple
	IS 'This table is used for the (many-to-many)-relationship between n_Tuple and Validity. One or more n-Tuples may have the same validity assigned and one validity can be referenced by different n-Tuples.'
;

COMMENT ON COLUMN domui_data_service.Validity_n_Tuple.Validity_n_Tuple_ID
	IS 'Internal ID of the table Validity_n_Tuple.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Validity_n_Tuple.n_Tuple_ID
	IS 'ID of the n-Tuple. Reference to the associated row in the table n_Tuple.'
;

COMMENT ON COLUMN domui_data_service.Validity_n_Tuple.Validity_ID
	IS 'ID of the validity. Reference to the associated row in the table Validity.'
;



COMMENT ON TABLE domui_data_service.Resource_Type
	IS 'Reference table, which is used to define a type for the resource.  Possible resource types: 	- image 	- text 	- menuitem 	- language 	- warningmessage 	- valuemapping 	- ...'
;

COMMENT ON COLUMN domui_data_service.Resource_Type.Resource_Type_ID
	IS 'Internal ID of the table Resource_Type.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Resource_Type.Resource_Type_Name
	IS 'Unique identifier of the resource type.'
;

COMMENT ON COLUMN domui_data_service.Resource_Type.Description
	IS '(Optional) description field, which can be used to describe the meaning of the resource type.'
;



COMMENT ON TABLE domui_data_service.Resource
	IS 'This table stores information about the resources created and modified by the service.   It is used to group "product types" like: Images, Texts, MenuItems, Languages, WarningMessages and ValueMappings, ...  The table "resource" is in general language independent, but there are some resources (e.g. texts), which will be stored separately per language/locale combination.  For other resources without a language information, for example language lists or value mappings, a default value will be set.  It is possible to identify the origin of each resource, due to the foreign key of the content_sync/ba_sync and the revisioning of the resources.'
;

COMMENT ON COLUMN domui_data_service.Resource.Resource_ID
	IS 'Internal ID of the table Resource.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Resource.Resource_Type_ID
	IS 'ID of the resource type. Reference to the associated row in the table Resource_Type'
;

COMMENT ON COLUMN domui_data_service.Resource.n_Tuple_ID
	IS 'ID of the n-Tuple. Reference to the associated row in the table n_Tuple.'
;

COMMENT ON COLUMN domui_data_service.Resource.ID_From_Source
	IS 'Unique identifier from source.'
;

COMMENT ON COLUMN domui_data_service.Resource.Version_From_Source
	IS 'Version from source.'
;

COMMENT ON COLUMN domui_data_service.Resource.Language
	IS 'Language of the resource using ISO 639-1. Default: --'
;

COMMENT ON COLUMN domui_data_service.Resource.Locale
	IS 'Locale of the resource using ISO 3166. Default: --'
;

COMMENT ON COLUMN domui_data_service.Resource.Revision
	IS 'Internal version of the resource.  If a new resource is created for the unique combination of      (id_from_source, resource_type_id, n_tuple_id, language and locale)  the revision will be incremented by 1.'
;

COMMENT ON COLUMN domui_data_service.Resource.Creation_Timestamp
	IS 'Point in time, at which this resource was created.'
;

COMMENT ON COLUMN domui_data_service.Resource.content_sync_id
	IS 'ID of the content sync resource. Reference to the associated row in the table content_sync  If the resource is created during a content synchronisation process with OA content service, the content_sync_id can be stored in this column to indicate the origin of the resource.'
;

COMMENT ON COLUMN domui_data_service.Resource.ba_sync_id
	IS 'ID of the BA sync resource. Reference to the associated row in the table ba_sync  If the resource is created during a content synchronisation process with BA platform, the ba_sync_id can be stored in this column to indicate the origin of the resource.'
;



COMMENT ON TABLE domui_data_service.DOMUI_Image_Key
	IS 'This table is used to store the language independent image key, which is referenced by other resources like menu items.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Image_Key.DOMUI_Image_Key_ID
	IS 'Internal ID of the table DOMUI_Image_Key. Used as PK.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Image_Key.Image_Key_Value
	IS 'Identifier of the image.'
;



COMMENT ON TABLE domui_data_service.DOMUI_Image
	IS 'Due to the fact that images can also be assigned to a menu item entry and those images can be language unspecific but also language specific, the images referenced by a menu item are using a language unspecific key.   This table stores the image filename attached to a language unspecific key.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Image.DOMUI_Image_ID
	IS 'Internal ID of the table DOMUI_Image. Used as PK.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Image.Image_Key
	IS 'Identifier of the image. Reference to the associated row in the table ''DOMUI_Image_Key''.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Image.Image_Name
	IS 'Filename of the image.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Image.Language
	IS 'Language of the image using ISO 639-1.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Image.Locale
	IS 'Locale of the image using ISO 3166.'
;



COMMENT ON TABLE domui_data_service.Resource_DOMUI_Image
	IS 'This table is used for the (many-to-many)-relationship between Resource and DOMUI_Image. One or more resources may have the same DOM-UI image and one DOM-UI image can be referenced by different resources.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Image.Resource_DOMUI_Image_ID
	IS 'Internal ID of the table Resource_DOMUI_Image Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Image.Resource_ID
	IS 'ID of the resource. Reference to the associated row in the table Resource.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Image.DOMUI_Image_ID
	IS 'ID of the DOM-UI image. Reference to the associated row in the table DOMUI_Image.'
;



COMMENT ON TABLE domui_data_service.DOMUI_Text_Type
	IS 'Reference table, which is used to define a type for the resource ''Text''.  Example:  	1. identifier 	2. title-menu-item 	3. title-warning-message'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text_Type.DOMUI_Text_Type_ID
	IS 'Internal ID of the table DOMUI_Text_Type.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text_Type.DOMUI_Text_Type
	IS 'Unique identifier of the Text type. (integer)'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text_Type.DOMUI_Text_Type_Name
	IS 'Unique identifier of the Text type. (text)'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text_Type.Description
	IS '(Optional) description of the Text type.'
;



COMMENT ON TABLE domui_data_service.DOMUI_Text_Key
	IS 'This table is used to store the language independent text key, which is referenced by other resources like menu items and warning messages.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text_Key.DOMUI_Text_Key_ID
	IS 'Internal ID of the table DOMUI_Text_Key.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text_Key.Text_Key_Value
	IS 'Identifier of the DOM-UI text.'
;



COMMENT ON TABLE domui_data_service.DOMUI_Text
	IS 'Texts like button labels or common headlines used by the DOM-UI are placed in this table. '
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text.DOMUI_Text_ID
	IS 'Internal ID of the table DOMUI_Text.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text.DOMUI_Text_Type_ID
	IS 'ID of the Text type. Reference to the associated row in the table ''DOMUI_Text_Type''.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text.Text_Key
	IS 'Identifier of the DOM-UI text. Reference to the associated row in the table ''DOMUI_Text_Key''.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text.Text_Value
	IS 'DOM-UI text in a specific language.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text.Language
	IS 'Language of the text using ISO 639-1.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Text.Locale
	IS 'Locale of the text using ISO 3166.'
;



COMMENT ON TABLE domui_data_service.Resource_DOMUI_Text
	IS 'This table is used for the (many-to-many)-relationship between Resource and DOMUI_Text. One or more resources may have the same DOM-UI Text and one DOM-UI Text can be referenced by different resources.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Text.Resource_DOMUI_Text_ID
	IS 'Internal ID of the table Resource_DOMUI_Text Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Text.Resource_ID
	IS 'ID of the resource. Reference to the associated row in the table Resource.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Text.DOMUI_Text_ID
	IS 'ID of the DOM-UI Text. Reference to the associated row in the table DOMUI_TEXT.'
;



COMMENT ON TABLE domui_data_service.DOMUI_Menu_Item
	IS 'The DOM-UI data domain contains structural information needed to organize menu lists and sub lists.  This table stores the structural information.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Menu_Item.DOMUI_Menu_Item_ID
	IS 'Internal ID of the table DOMUI_Menu_Item.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Menu_Item.Parent_Item_ID
	IS 'The internal ID of a possible parent menu item.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Menu_Item.Title_Key
	IS 'The title of the menu item in form of a language unspecific key, which points to corresponding entries in the table DOMUI_Text_Key.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Menu_Item.Text_Key
	IS 'A descriptive text of the menu item in form of a language unspecific key, which points to corresponding entries in the table DOMUI_Text_Key.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Menu_Item.Add_Text_Key
	IS 'An additional descriptive text of the menu item in form of a language unspecific key, which points to corresponding entries in the table DOMUI_Text_Key.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Menu_Item.Icon
	IS 'A constant which defines an assigned icon.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Menu_Item.Image_Key
	IS 'A language unspecific key for an assigned image, pointing to corresponding entries in the table DOMUI_Image_Key.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Menu_Item.Sort_Order
	IS 'A freely definable, numeric value to handle the order of menu items on the same level.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Menu_Item.Action
	IS 'A possible action assigned to a menu item.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Menu_Item.Object_ID_From_Source
	IS 'A reference ID to a specific DOM content, assigned to the menu item. The reference has to be language unspecific.'
;



COMMENT ON TABLE domui_data_service.Resource_DOMUI_Menu_Item
	IS 'This table is used for the (many-to-many)-relationship between Resource and DOMUI_Menu_Item. One or more resources may have the same DOM-UI menu item and one DOM-UI menu item can be referenced by different resources.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Menu_Item.Resource_DOMUI_Menu_Item_ID
	IS 'Internal ID of the table Resource_DOMUI_Menu_Item Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Menu_Item.Resource_ID
	IS 'ID of the resource. Reference to the associated row in the table Resource.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Menu_Item.DOMUI_Menu_Item_ID
	IS 'ID of the DOM-UI menu item. Reference to the associated row in the table DOMUI_Menu_Item.'
;



COMMENT ON TABLE domui_data_service.DOMUI_Language
	IS 'Due to the fact that the display of a language list is product specific, the OA Backend doesn''t provide a sorted list of languages.   Sorting has to be done based on additional product specific data. Regarding the product DOM-UI the order of languages is available in this table.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Language.DOMUI_Language_ID
	IS 'Internal ID of the table DOMUI_Language. Used as PK.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Language.Language
	IS 'Language code corresponding to ISO639-1  Examples: ''de'' ''en'''
;

COMMENT ON COLUMN domui_data_service.DOMUI_Language.Language3
	IS 'Language code corresponding to ISO639-3  Examples: ''deu'' ''eng'''
;

COMMENT ON COLUMN domui_data_service.DOMUI_Language.Locale
	IS 'Locale code corresponding to ISO-3166  Examples: ''DE'' ''GB'''
;

COMMENT ON COLUMN domui_data_service.DOMUI_Language.Locale_HU
	IS 'Locale code for the HU mapping, corresponding to ISO-3166  Examples: ''DE'' ''GB'''
;

COMMENT ON COLUMN domui_data_service.DOMUI_Language.Reading_Direction
	IS 'Reading direction of the language.  Possible values: 1 - LTR - Left-to-right 2 - RTL - Right-to-left'
;

COMMENT ON COLUMN domui_data_service.DOMUI_Language.Sort_Order
	IS 'Order number of the language entry.  Remark: This column was renamed from "order" to "sort_order".'
;



COMMENT ON TABLE domui_data_service.Resource_DOMUI_Language
	IS 'This table is used for the (many-to-many)-relationship between Resource and DOMUI_Language. One or more resources may have the same DOM-UI Language and one DOM-UI Language can be referenced by different resources.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Language.Resource_DOMUI_Language_ID
	IS 'Internal ID of the table Resource_DOMUI_Language Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Language.Resource_ID
	IS 'ID of the resource. Reference to the associated row in the table Resource.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_Language.DOMUI_Language_ID
	IS 'ID of the DOM-UI language. Reference to the associated row in the table DOMUI_Language.'
;



COMMENT ON TABLE domui_data_service.DOMUI_WarningMessage
	IS 'This table is used to store mapping resources for:  	- ''EVC to topic mapping'' (Warning message)'
;

COMMENT ON COLUMN domui_data_service.DOMUI_WarningMessage.DOMUI_WarningMessage_ID
	IS 'Internal ID of the table DOMUI_WarningMessage. Used as PK.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_WarningMessage.Message_Text_Key
	IS 'The text key of the warning message, which points to corresponding entries in the table DOMUI_Text_Key.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_WarningMessage.Short_Description_ID
	IS 'ID of the topic referencing to the short description of the warning message.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_WarningMessage.Long_Description_ID
	IS 'ID of the topic referencing to the long description of the warning message.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_WarningMessage.Message_ID
	IS 'The message ID for this warning message.'
;



COMMENT ON TABLE domui_data_service.Resource_DOMUI_WarningMessage
	IS 'This table is used for the (many-to-many)-relationship between Resource and DOMUI_WarningMessage. One or more resources may have the same DOM-UI WarningMessage and one DOM-UI WarningMessage can be referenced by different resources.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_WarningMessage.Resource_DOMUI_WarningMessage_ID
	IS 'Internal ID of the table Resource_DOMUI_WarningMessage Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_WarningMessage.Resource_ID
	IS 'ID of the resource. Reference to the associated row in the table Resource.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_WarningMessage.DOMUI_WarningMessage_ID
	IS 'ID of the DOM-UI WarningMessage. Reference to the associated row in the table DOMUI_WarningMessage.'
;



COMMENT ON TABLE domui_data_service.DOMUI_ValueMapping_Type
	IS 'Reference table, which is used to define a type for the resource ''ValueMapping''.  Example:  	1. common-topic - ''Common Topic (Disclaimer, Default Text)'' 	2. deeplink-mapping - ''Deeplink mapping (DiBA -> HU)'' 	3. deeplink-to-topic-mapping - ''Deeplink to topic mapping (HU -> DiBA)'' 	4. context-sensitive-entry - ''Context sensitive entry points to topic mapping'''
;

COMMENT ON COLUMN domui_data_service.DOMUI_ValueMapping_Type.DOMUI_ValueMapping_Type_ID
	IS 'Internal ID of the table DOMUI_ValueMapping_Type.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_ValueMapping_Type.DOMUI_ValueMapping_Type
	IS 'Unique identifier of the ValueMapping type. (integer)'
;

COMMENT ON COLUMN domui_data_service.DOMUI_ValueMapping_Type.DOMUI_ValueMapping_Type_Name
	IS 'Unique identifier of the ValueMapping type. (text)'
;

COMMENT ON COLUMN domui_data_service.DOMUI_ValueMapping_Type.Description
	IS '(Optional) description of the ValueMapping type.'
;



COMMENT ON TABLE domui_data_service.DOMUI_ValueMapping
	IS 'This table is used to store mapping resources for:   	1. ''Common Topic mapping'' (Disclaimer, Default Text) 	2. ''Deeplink mapping'' (DiBA -> HU) 	3. ''Deeplink to topic mapping'' (HU -> DiBA) 	4. ''Context sensitive entry points to topic mapping'''
;

COMMENT ON COLUMN domui_data_service.DOMUI_ValueMapping.DOMUI_ValueMapping_ID
	IS 'Internal ID of the table DOMUI_ValueMapping. Used as PK.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_ValueMapping.DOMUI_ValueMapping_Type_ID
	IS 'ID of the ValueMapping type. Reference to the associated row in the table ''DOMUI_ValueMapping_Type''.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_ValueMapping.ValueMapping_Name
	IS 'The name of the ValueMapping.'
;

COMMENT ON COLUMN domui_data_service.DOMUI_ValueMapping.ValueMapping_Value
	IS 'The text value of the ValueMapping.'
;



COMMENT ON TABLE domui_data_service.Resource_DOMUI_ValueMapping
	IS 'This table is used for the (many-to-many)-relationship between Resource and DOMUI_ValueMapping. One or more resources may have the same DOM-UI ValueMapping and one DOM-UI ValueMapping can be referenced by different resources.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_ValueMapping.Resource_DOMUI_ValueMapping_ID
	IS 'Internal ID of the table Resource_DOMUI_ValueMapping Used as PK.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_ValueMapping.Resource_ID
	IS 'ID of the resource. Reference to the associated row in the table Resource.'
;

COMMENT ON COLUMN domui_data_service.Resource_DOMUI_ValueMapping.DOMUI_ValueMapping_ID
	IS 'ID of the DOM-UI ValueMapping. Reference to the associated row in the table DOMUI_ValueMapping.'
;



COMMENT ON TABLE domui_data_service.ba_sync
	IS 'This table is used by the DOM UI Data service to manage/protocol the content synchronization process with BA platform.'
;

COMMENT ON COLUMN domui_data_service.ba_sync.ba_sync_id
	IS 'Internal ID of the table ba_sync Used as PK.'
;

COMMENT ON COLUMN domui_data_service.ba_sync.sync_resource_type
	IS 'URN to identify the resource type.  Example: urn:com:mercedes-benz:oa:dom-ui-data-service:basync'
;

COMMENT ON COLUMN domui_data_service.ba_sync.sync_resource_location
	IS 'Location of the resource (complete path).  Example: http://dom-ui-data-service:8080/dom-ui-data-service/v1/basync/20'
;

COMMENT ON COLUMN domui_data_service.ba_sync.sync_resource_status
	IS 'Status code indicating the type of change of the resource.   Possible values:  -1: Error 0: Resource not changed 1: Resource created 2: Resource updated 3: Resource deleted'
;

COMMENT ON COLUMN domui_data_service.ba_sync.creation_timestamp
	IS 'The timestamp of the message, which initiated the sync run. Populated with now() when starting a sync run.'
;

COMMENT ON COLUMN domui_data_service.ba_sync.log_file_url
	IS 'A reference to a log file where new log entries get appended.'
;



COMMENT ON TABLE domui_data_service.content_sync
	IS 'This table is used by the DOM UI Data service to manage/protocol the content synchronization process with OA Content Service.'
;

COMMENT ON COLUMN domui_data_service.content_sync.content_sync_id
	IS 'Internal ID of the table content_sync Used as PK.'
;

COMMENT ON COLUMN domui_data_service.content_sync.sync_resource_type
	IS 'URN to identify the resource type.  Example: urn:com:mercedes-benz:oa:dom-ui-data-service:contentsync'
;

COMMENT ON COLUMN domui_data_service.content_sync.sync_resource_location
	IS 'Location of the resource (complete path).  Example: http://dom-ui-data-service:8080/dom-ui-data-service/v1/contentsync/20'
;

COMMENT ON COLUMN domui_data_service.content_sync.sync_resource_status
	IS 'Status code indicating the type of change of the resource.   Possible values:  -1: Error 0: Resource not changed 1: Resource created 2: Resource updated 3: Resource deleted'
;

COMMENT ON COLUMN domui_data_service.content_sync.creation_timestamp
	IS 'The timestamp of the message, which initiated the sync run. Populated with now() when starting a sync run.'
;

COMMENT ON COLUMN domui_data_service.content_sync.log_file_url
	IS 'A reference to a log file where new log entries get appended.'
;



COMMENT ON TABLE domui_data_service.content_sync_reference
	IS 'This table is used to document the history of the processing.   Any consumer who is triggered by a message and creates a new resource has to add a new element to the references list of the triggering message describing the resource that has been processed.'
;

COMMENT ON COLUMN domui_data_service.content_sync_reference.content_sync_reference_id
	IS 'Internal ID of the table content_sync_reference Used as PK.'
;

COMMENT ON COLUMN domui_data_service.content_sync_reference.content_sync_id
	IS 'ID of the content_sync. Reference to the associated row in the table content_sync.'
;

COMMENT ON COLUMN domui_data_service.content_sync_reference.ref_resource_type
	IS 'URN to identify the resource type.  Example: urn:com:mercedes-benz:oa:query'
;

COMMENT ON COLUMN domui_data_service.content_sync_reference.ref_resource_location
	IS 'Location of the referenced resource (complete path).  Example: http://oa-content-service:8080/oa-content-service/v1/queries/63'
;

COMMENT ON COLUMN domui_data_service.content_sync_reference.ref_resource_id
	IS 'The ID of the referenced resource.'
;

COMMENT ON COLUMN domui_data_service.content_sync_reference.creation_timestamp
	IS 'The timestamp for the creation of this entry. '
;



COMMENT ON TABLE domui_data_service.request_log
	IS 'This table is used by the DOM UI Data Service to protocol received messages from the message exchange, requests and their corresponding responses.    	1. (Optional) The received message from the message exchange is inserted in the column MESSAGE_CONTENT and the columns MESSAGE_EXCHANGE and MESSAGE_TIMESTAMP are filled accordingly. 	2. The request is inserted into the column REQUEST_CONTENT and the columns REQUEST_TYPE and REQUEST_TIMESTAMP are filled accordingly. The overall STATUS is set to 1 (IN_PROGRESS). 	3. Asynchronous processing is started. The columns RESPONSE_CONTENT and RESPONSE_TIMESTAMP are populated. => STATUS = 1 (IN_PROGRESS) 	4. Asynchronous processing is finished. The status is updated accordingly. => STATUS = 2 (COMPLETED) if the processing was successful => STATUS = 3 (FAILED) if the processing failed'
;

COMMENT ON COLUMN domui_data_service.request_log.request_log_id
	IS 'Internal ID of the table request_log Used as PK.'
;

COMMENT ON COLUMN domui_data_service.request_log.message_content
	IS 'The content of the received message.'
;

COMMENT ON COLUMN domui_data_service.request_log.message_timestamp
	IS 'The timestamp when the message was received.'
;

COMMENT ON COLUMN domui_data_service.request_log.message_exchange
	IS 'The exchange name from where the message was received.  Examples: 	- oa-content-bulk_exchange 	- oa-content-query_exchange 	- ...'
;

COMMENT ON COLUMN domui_data_service.request_log.request_content
	IS 'The content of the request.'
;

COMMENT ON COLUMN domui_data_service.request_log.request_timestamp
	IS 'The timestamp when the request was sent.'
;

COMMENT ON COLUMN domui_data_service.request_log.request_type
	IS 'The type of the request.  Examples: 	- POST /queries 	- GET /queries/{id} 	- ...'
;

COMMENT ON COLUMN domui_data_service.request_log.response_content
	IS 'The content of the response. (The column is set to NULL first and populated as soon as it is available.)'
;

COMMENT ON COLUMN domui_data_service.request_log.response_timestamp
	IS 'The timestamp of the response. (The column is set to NULL first and populated as soon as it is available.)'
;

COMMENT ON COLUMN domui_data_service.request_log.user_id
	IS '(Optional) User, who initiated the request. '
;

COMMENT ON COLUMN domui_data_service.request_log.status
	IS 'Status of the request.   Possible values: 0 = NEW: initial default value 1 = IN_PROGRESS: request is in progress (REQUEST has been inserted into the table, RESPONSE is added when available.) 2 = COMPLETED: processing of the request was successful 3 = FAILED:  processing of the request has failed'
;



COMMENT ON TABLE domui_data_service.sys_param
	IS 'This table is used to store the names and values of system parameters, which are valid for the whole system, like software versions, paths, etc.'
;

COMMENT ON COLUMN domui_data_service.sys_param.sys_param_id
	IS 'Internal ID of the table sys_param.  Used as PK.'
;

COMMENT ON COLUMN domui_data_service.sys_param.par_name
	IS 'Name of the parameter.  The value has to be unique for all rows in the table.'
;

COMMENT ON COLUMN domui_data_service.sys_param.par_value
	IS 'Value of the parameter.'
;

COMMENT ON COLUMN domui_data_service.sys_param.par_description
	IS '(Optional) Description of the parameter.  It should describe the meaning of the specific parameter or for what purpose the parameter is needed.'
;



/* Create Views */

CREATE VIEW domui_data_service.v_ntuple AS
select
	n.n_tuple_id,
	n.n_tuple_name
from
	domui_data_service.n_tuple n
;

CREATE VIEW domui_data_service.v_ntuple_validity AS
select
	n.n_tuple_id,
	n.n_tuple_name,
	v.validity_id,
	--v.validity_type_id,
	vt.validity_type_name,
	v.validity_code
from
	domui_data_service.n_tuple n
	inner join domui_data_service.validity_n_tuple vn
		on n.n_tuple_id = vn.n_tuple_id
	inner join domui_data_service.validity v
		on vn.validity_id = v.validity_id
	inner join domui_data_service.validity_type vt
		on v.validity_type_id = vt.validity_type_id
;

CREATE VIEW domui_data_service.v_resource AS
select
	r.resource_id,
	--r.resource_type_id,
	r.n_tuple_id,
	rt.resource_type_name,
	r.id_from_source,
	r.version_from_source,
	r.revision,
	r.language,
	r.locale,
	r.creation_timestamp,
	--cs.content_sync_id,
	cs.sync_resource_type,
	cs.sync_resource_location,
	cs.sync_resource_status,
	cs.log_file_url,
	csr.ref_resource_type,
	csr.ref_resource_location,
	--bs.ba_sync_id,
	bs.sync_resource_type     as ba_sync_resource_type,
	bs.sync_resource_location as ba_sync_resource_location,
	bs.sync_resource_status   as ba_sync_resource_status,
	bs.log_file_url           as ba_log_file_url
from
	domui_data_service.resource r
	inner join domui_data_service.resource_type rt
		on r.resource_type_id = rt.resource_type_id
	left outer join domui_data_service.content_sync cs
		on r.content_sync_id = cs.content_sync_id
	left outer join domui_data_service.content_sync_reference csr
		on cs.content_sync_id = csr.content_sync_id
	left outer join domui_data_service.ba_sync bs
		on r.ba_sync_id = bs.ba_sync_id
;

CREATE VIEW domui_data_service.v_resource_ntuple AS
select
	r.resource_id,
	--r.resource_type_id,
	rt.resource_type_name,
	r.id_from_source,
	r.version_from_source,
	r.revision,
	r.language,
	r.locale,
	r.creation_timestamp,
	n.n_tuple_id,
	n.n_tuple_name
from
	domui_data_service.resource r
	inner join domui_data_service.resource_type rt
		on r.resource_type_id = rt.resource_type_id
	inner join domui_data_service.n_tuple n
		on r.n_tuple_id = n.n_tuple_id
;

CREATE VIEW domui_data_service.v_resource_ntuple_validity AS
select
	r.resource_id,
	--r.resource_type_id,
	rt.resource_type_name,
	r.id_from_source,
	r.version_from_source,
	r.revision,
	r.language,
	r.locale,
	r.creation_timestamp,
	n.n_tuple_id,
	n.n_tuple_name,
	v.validity_id,
	--v.validity_type_id,
	vt.validity_type_name,
	v.validity_code
from
	domui_data_service.resource r
	inner join domui_data_service.resource_type rt
		on r.resource_type_id = rt.resource_type_id
	inner join domui_data_service.n_tuple n
		on r.n_tuple_id = n.n_tuple_id
	inner join domui_data_service.validity_n_tuple vn
		on n.n_tuple_id = vn.n_tuple_id
	inner join domui_data_service.validity v
		on vn.validity_id = v.validity_id
	inner join domui_data_service.validity_type vt
		on v.validity_type_id = vt.validity_type_id
;

CREATE VIEW domui_data_service.v_domui_image_resource_ntuple AS
select
	r.resource_id,
	--r.resource_type_id,
	rt.resource_type_name,
	r.id_from_source as resource_id_from_source,
	r.version_from_source as resource_version_from_source,
	r.revision as resource_revision,
	r.language as resource_language,
	r.locale as resource_locale,
	r.creation_timestamp as resource_creation_ts,
	n.n_tuple_id,
	n.n_tuple_name,
	(
		select
			jsonb_pretty (
				jsonb_agg (
					cast ( json_build_object(
						'name', t.validity_type_name,
						'code', t.validity_code
					) as jsonb )
					order by t.validity_type_name
				)
			) as answer
		from (
			select
				v.validity_id,
				vt.validity_type_name,
				v.validity_code
			from
				domui_data_service.validity_n_tuple vn
				inner join domui_data_service.validity v
					on v.validity_id = vn.validity_id
				inner join domui_data_service.validity_type vt
					on v.validity_type_id = vt.validity_type_id
			where
				vn.n_tuple_id = n.n_tuple_id
			) t
	) as validities,
	di.domui_image_id,
	dik.image_key_value as image_key,
	di.image_name,
	di.language,
	di.locale
from
	domui_data_service.resource r
	inner join domui_data_service.resource_type rt
		on r.resource_type_id = rt.resource_type_id
	inner join domui_data_service.n_tuple n
		on r.n_tuple_id = n.n_tuple_id
	inner join domui_data_service.resource_domui_image r_di
		on  r.resource_id = r_di.resource_id
	inner join domui_data_service.domui_image di
		on r_di.domui_image_id = di.domui_image_id
	inner join domui_data_service.domui_image_key dik
		on di.image_key = dik.domui_image_key_id
;

CREATE VIEW domui_data_service.v_domui_text_resource_ntuple AS
select
	r.resource_id,
	--r.resource_type_id,
	rt.resource_type_name,
	r.id_from_source as resource_id_from_source,
	r.version_from_source as resource_version_from_source,
	r.revision as resource_revision,
	r.language as resource_language,
	r.locale as resource_locale,
	r.creation_timestamp as resource_creation_ts,
	n.n_tuple_id,
	n.n_tuple_name,
	(
		select
			jsonb_pretty (
				jsonb_agg (
					cast ( json_build_object(
						'name', t.validity_type_name,
						'code', t.validity_code
					) as jsonb )
					order by t.validity_type_name
				)
			) as answer
		from (
			select
				v.validity_id,
				vt.validity_type_name,
				v.validity_code
			from
				domui_data_service.validity_n_tuple vn
				inner join domui_data_service.validity v
					on v.validity_id = vn.validity_id
				inner join domui_data_service.validity_type vt
					on v.validity_type_id = vt.validity_type_id
			where
				vn.n_tuple_id = n.n_tuple_id
			) t
	) as validities,
	dt.domui_text_id,
	dtt.domui_text_type,
	dtt.domui_text_type_name,
	dtk.text_key_value as text_key,
	dt.text_value,
	dt.language,
	dt.locale
from
	domui_data_service.resource r
	inner join domui_data_service.resource_type rt
		on r.resource_type_id = rt.resource_type_id
	inner join domui_data_service.n_tuple n
		on r.n_tuple_id = n.n_tuple_id
	inner join domui_data_service.resource_domui_text r_dt
		on  r.resource_id = r_dt.resource_id
	inner join domui_data_service.domui_text dt
		on r_dt.domui_text_id = dt.domui_text_id
	inner join domui_data_service.domui_text_key dtk
		on dt.text_key = dtk.domui_text_key_id
	inner join domui_data_service.domui_text_type dtt
		on dt.domui_text_type_id = dtt.domui_text_type_id
;

CREATE VIEW domui_data_service.v_domui_menu_item_resource_ntuple AS
select
	r.resource_id,
	--r.resource_type_id,
	rt.resource_type_name,
	r.id_from_source as resource_id_from_source,
	r.version_from_source as resource_version_from_source,
	r.revision as resource_revision,
	r.language as resource_language,
	r.locale as resource_locale,
	r.creation_timestamp as resource_creation_ts,
	n.n_tuple_id,
	n.n_tuple_name,
	(
		select
			jsonb_pretty (
				jsonb_agg (
					cast ( json_build_object(
						'name', t.validity_type_name,
						'code', t.validity_code
					) as jsonb )
					order by t.validity_type_name
				)
			) as answer
		from (
			select
				v.validity_id,
				vt.validity_type_name,
				v.validity_code
			from
				domui_data_service.validity_n_tuple vn
				inner join domui_data_service.validity v
					on v.validity_id = vn.validity_id
				inner join domui_data_service.validity_type vt
					on v.validity_type_id = vt.validity_type_id
			where
				vn.n_tuple_id = n.n_tuple_id
			) t
	) as validities,
	dm.domui_menu_item_id,
	dm.parent_item_id,
	dtk_title.text_key_value as title_key,
	dtk_text.text_key_value as text_key,
	dtk_add_text.text_key_value as add_text_key,
	dm.icon,
	dik.image_key_value as image_key,
	dm.sort_order,
	dm.action,
	dm.object_id_from_source
from
	domui_data_service.resource r
	inner join domui_data_service.resource_type rt
		on r.resource_type_id = rt.resource_type_id
	inner join domui_data_service.n_tuple n
		on r.n_tuple_id = n.n_tuple_id
	inner join domui_data_service.resource_domui_menu_item r_dm
		on  r.resource_id = r_dm.resource_id
	inner join domui_data_service.domui_menu_item dm
		on r_dm.domui_menu_item_id = dm.domui_menu_item_id
	inner join domui_data_service.domui_text_key dtk_title
		on dm.title_key = dtk_title.domui_text_key_id
	left outer join domui_data_service.domui_text_key dtk_text
		on dm.text_key = dtk_text.domui_text_key_id
	left outer join domui_data_service.domui_text_key dtk_add_text
		on dm.add_text_key = dtk_add_text.domui_text_key_id
	left outer join domui_data_service.domui_image_key dik
		on dm.image_key = dik.domui_image_key_id
;

CREATE VIEW domui_data_service.v_domui_language_resource_ntuple AS
select
	r.resource_id,
	--r.resource_type_id,
	rt.resource_type_name,
	r.id_from_source as resource_id_from_source,
	r.version_from_source as resource_version_from_source,
	r.revision as resource_revision,
	r.language as resource_language,
	r.locale as resource_locale,
	r.creation_timestamp as resource_creation_ts,
	n.n_tuple_id,
	n.n_tuple_name,
	(
		select
			jsonb_pretty (
				jsonb_agg (
					cast ( json_build_object(
						'name', t.validity_type_name,
						'code', t.validity_code
					) as jsonb )
					order by t.validity_type_name
				)
			) as answer
		from (
			select
				v.validity_id,
				vt.validity_type_name,
				v.validity_code
			from
				domui_data_service.validity_n_tuple vn
				inner join domui_data_service.validity v
					on v.validity_id = vn.validity_id
				inner join domui_data_service.validity_type vt
					on v.validity_type_id = vt.validity_type_id
			where
				vn.n_tuple_id = n.n_tuple_id
			) t
	) as validities,
	dl.domui_language_id,
	dl.language,
	dl.language3,
	dl.locale,
	dl.locale_hu,
	dl.reading_direction,
	dl.sort_order
from
	domui_data_service.resource r
	inner join domui_data_service.resource_type rt
		on r.resource_type_id = rt.resource_type_id
	inner join domui_data_service.n_tuple n
		on r.n_tuple_id = n.n_tuple_id
	inner join domui_data_service.resource_domui_language r_dl
		on  r.resource_id = r_dl.resource_id
	inner join domui_data_service.domui_language dl
		on r_dl.domui_language_id = dl.domui_language_id
;

CREATE VIEW domui_data_service.v_domui_warningmessage_resource_ntuple AS
select
	r.resource_id,
	--r.resource_type_id,
	rt.resource_type_name,
	r.id_from_source as resource_id_from_source,
	r.version_from_source as resource_version_from_source,
	r.revision as resource_revision,
	r.language as resource_language,
	r.locale as resource_locale,
	r.creation_timestamp as resource_creation_ts,
	n.n_tuple_id,
	n.n_tuple_name,
	(
		select
			jsonb_pretty (
				jsonb_agg (
					cast ( json_build_object(
						'name', t.validity_type_name,
						'code', t.validity_code
					) as jsonb )
					order by t.validity_type_name
				)
			) as answer
		from (
			select
				v.validity_id,
				vt.validity_type_name,
				v.validity_code
			from
				domui_data_service.validity_n_tuple vn
				inner join domui_data_service.validity v
					on v.validity_id = vn.validity_id
				inner join domui_data_service.validity_type vt
					on v.validity_type_id = vt.validity_type_id
			where
				vn.n_tuple_id = n.n_tuple_id
			) t
	) as validities,
	dwm.domui_warningmessage_id,
	dtk.text_key_value as message_text_key,
	dwm.short_description_id,
	dwm.long_description_id,
	dwm.message_id
from
	domui_data_service.resource r
	inner join domui_data_service.resource_type rt
		on r.resource_type_id = rt.resource_type_id
	inner join domui_data_service.n_tuple n
		on r.n_tuple_id = n.n_tuple_id
	inner join domui_data_service.resource_domui_warningmessage r_dwm
		on  r.resource_id = r_dwm.resource_id
	inner join domui_data_service.domui_warningmessage dwm
		on r_dwm.domui_warningmessage_id = dwm.domui_warningmessage_id
	inner join domui_data_service.domui_text_key dtk
		on dwm.message_text_key = dtk.domui_text_key_id
;

CREATE VIEW domui_data_service.v_domui_valuemapping_resource_ntuple AS
select
	r.resource_id,
	--r.resource_type_id,
	rt.resource_type_name,
	r.id_from_source as resource_id_from_source,
	r.version_from_source as resource_version_from_source,
	r.revision as resource_revision,
	r.language as resource_language,
	r.locale as resource_locale,
	r.creation_timestamp as resource_creation_ts,
	n.n_tuple_id,
	n.n_tuple_name,
	(
		select
			jsonb_pretty (
				jsonb_agg (
					cast ( json_build_object(
						'name', t.validity_type_name,
						'code', t.validity_code
					) as jsonb )
					order by t.validity_type_name
				)
			) as answer
		from (
			select
				v.validity_id,
				vt.validity_type_name,
				v.validity_code
			from
				domui_data_service.validity_n_tuple vn
				inner join domui_data_service.validity v
					on v.validity_id = vn.validity_id
				inner join domui_data_service.validity_type vt
					on v.validity_type_id = vt.validity_type_id
			where
				vn.n_tuple_id = n.n_tuple_id
			) t
	) as validities,
	dvm.domui_valuemapping_id,
	dvmt.domui_valuemapping_type,
	dvmt.domui_valuemapping_type_name,
	dvm.valuemapping_name,
	dvm.valuemapping_value
from
	domui_data_service.resource r
	inner join domui_data_service.resource_type rt
		on r.resource_type_id = rt.resource_type_id
	inner join domui_data_service.n_tuple n
		on r.n_tuple_id = n.n_tuple_id
	inner join domui_data_service.resource_domui_valuemapping r_dvm
		on  r.resource_id = r_dvm.resource_id
	inner join domui_data_service.domui_valuemapping dvm
		on r_dvm.domui_valuemapping_id = dvm.domui_valuemapping_id
	inner join domui_data_service.domui_valuemapping_type dvmt
		on dvm.domui_valuemapping_type_id = dvmt.domui_valuemapping_type_id
;

-- This script inserts initial data.
-- It is used during the installation of a new DB after creating the empty tables.
-- -------------------------------------------------------------------------------

insert into domui_data_service.sys_param (sys_param_id, par_name, par_value, par_description)
	values (-1, 'OA DOM-UI DATA DB - Schema DOMUI_DATA_SERVICE', '1.6.1', 'Version of the schema DOMUI_DATA_SERVICE')
;
insert into domui_data_service.sys_param (sys_param_id, par_name, par_value, par_description)
	values (-2, 'OA_URI_SCHEME', 'urn', 'First part of URI for OA: scheme')
;
insert into domui_data_service.sys_param (sys_param_id, par_name, par_value, par_description)
	values (-3, 'OA_URI_AUTHORITY', 'com:mercedes-benz:oa', 'Second part of URI for OA: authority')
;
insert into domui_data_service.sys_param (sys_param_id, par_name, par_value, par_description)
	values (-4, 'OA_URI_SYSTEM_IDENTIFIER', 'system', 'Third part of URI for OA: only used for source systems and external systems. Not for objects, where the third part is the object type.')
;

-- https://seu30.gdc-sbr01.t-systems.com/confluence/x/l58uC
insert into domui_data_service.validity_type (validity_type_id, validity_type_name, description)
	values
		(-1, 'business-line', null),
		(-2, 'vehicle-line', null),
		(-3, 'vehicle-market', null),
		(-4, 'pub-release', 'not used anymore'),
		(-5, 'market', null),
		(-6, 'device-name', null),
		(-7, 'device-model', null),
		(-8, 'device-model-variant', null),
		(-9, 'device-layout', null),
		(-10, 'device-market', null),
		(-11, 'information-product', null),
		(-12, 'pa-id', null),
		(-13, 'state-of-construction', null)
;

insert into domui_data_service.resource_type (resource_type_id, resource_type_name, description)
	values
		(-1, 'image', null),
		(-2, 'text', null),
		(-3, 'menuitem', null),
		(-4, 'language', null),
		(-5, 'warningmessage', null),
		(-6, 'valuemapping', null)
;

insert into domui_data_service.domui_text_type (domui_text_type_id, domui_text_type, domui_text_type_name, description)
	values
		(-1, 1, 'identifier', null),
		(-2, 2, 'title-menu-item', null),
		(-3, 3, 'title-warning-message', null)
;

insert into domui_data_service.domui_valuemapping_type (domui_valuemapping_type_id, domui_valuemapping_type, domui_valuemapping_type_name, description)
	values
		(-1, 1, 'common-topic', 'Common Topic (Disclaimer, Default Text)'),
		(-2, 2, 'deeplink-to-topic-mapping', 'Deeplink to topic mapping (HU -> DiBA)'),
		(-3, 3, 'context-sensitive-entry', 'Context sensitive entry points to topic mapping')
		-- not used anymore: 'deeplink-mapping', 'Deeplink mapping (DiBA -> HU)'
;